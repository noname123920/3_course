#include <iostream>
#include <stdexcept>  // для исключений
#include <string>     // для std::to_string

// Класс для хранения времени суток
class Time {
private:
    // Поля класса (переменные-члены)
    int hours;    // хранит часы (0-23)
    int minutes;  // хранит минуты (0-59)  
    int seconds;  // хранит секунды (0-59)

    // Вспомогательная функция для проверки корректности времени
    // const - не изменяет объект, просто проверяет значения
    void validate_time(int h, int m, int s) const {
        // Проверка часов (должны быть 0-23)
        if (h < 0 || h > 23) {
            throw std::invalid_argument("Часы должны быть в диапазоне 0-23. Получено: " + std::to_string(h));
        }
        // Проверка минут (должны быть 0-59)
        if (m < 0 || m > 59) {
            throw std::invalid_argument("Минуты должны быть в диапазоне 0-59. Получено: " + std::to_string(m));
        }
        // Проверка секунд (должны быть 0-59)
        if (s < 0 || s > 59) {
            throw std::invalid_argument("Секунды должны быть в диапазоне 0-59. Получено: " + std::to_string(s));
        }
    }

public:
    // 1. КОНСТРУКТОР ПО УМОЛЧАНИЮ (создает время 00:00:00)
    // Использует список инициализации для установки значений
    Time() : hours(0), minutes(0), seconds(0) {}
    
    // 2. КОНСТРУКТОР С ПАРАМЕТРАМИ (из задания)
    // Принимает три аргумента типа int: часы, минуты, секунды
    Time(int h, int m, int s) {
        validate_time(h, m, s);  // проверка корректности переданных значений
        hours = h;
        minutes = m;
        seconds = s;
    }
    
    // 3. КОНСТРУКТОР КОПИРОВАНИЯ (создает копию существующего объекта)
    // Принимает константную ссылку на другой объект Time
    // Использует список инициализации для копирования значений
    Time(const Time& other) : hours(other.hours), minutes(other.minutes), seconds(other.seconds) {}

    // Деструктор НЕ пишем - компилятор сгенерирует его автоматически
    // Так как нет динамической памяти, явный деструктор не нужен

    // ГЕТТЕРЫ (get-функции). Позволяют получить значения полей извне класса. 
    // const - функция не меняет объект, просто возвращает значения полей
    int get_hours() const {
        return hours;
    }

    int get_minutes() const {
        return minutes;
    }

    int get_seconds() const {
        return seconds;
    }

    // СЕТТЕР (устанавливает новое время с проверкой корректности через исключения)
    // Если передать некорректные значения, метод выбросит исключение
    void set_time(int h, int m, int s) {
        validate_time(h, m, s);  // проверка с выбрасыванием исключения при ошибке
        hours = h;
        minutes = m;
        seconds = s;
    }

    // Дополнительная функция для вывода времени с форматированием 
    // (например 5:8:3 -> 05:08:03)
    // const - не изменяет объект, только выводит информацию
    void print_time() const {
        // Тернарный оператор: если значение < 10, добавляем "0" перед ним
        std::cout << (hours < 10 ? "0" : "") << hours << ":"
                  << (minutes < 10 ? "0" : "") << minutes << ":"
                  << (seconds < 10 ? "0" : "") << seconds << std::endl;
    }
};

// Пример использования и тестирования
int main() {
    std::cout << "=== ТЕСТИРОВАНИЕ КЛАССА TIME ===" << std::endl;
    
    // Тест 1: Создание объектов разными конструкторами
    std::cout << "\n1. ТЕСТ КОНСТРУКТОРОВ:" << std::endl;
    
    // Конструктор по умолчанию (00:00:00)
    Time t1;
    std::cout << "Время по умолчанию: ";
    t1.print_time();
    
    // Конструктор с параметрами
    Time t2(14, 30, 45);
    std::cout << "Время 14:30:45: ";
    t2.print_time();
    
    // Конструктор копирования
    Time t3 = t2;
    std::cout << "Копия времени (через конструктор копирования): ";
    t3.print_time();
    
    // Тест 2: Проверка геттеров
    std::cout << "\n2. ТЕСТ ГЕТТЕРОВ:" << std::endl;
    std::cout << "Время t2 через геттеры: " << t2.get_hours() << ":" 
              << t2.get_minutes() << ":" << t2.get_seconds() << std::endl;
    
    // Тест 3: Проверка сеттера
    std::cout << "\n3. ТЕСТ СЕТТЕРА:" << std::endl;
    t1.set_time(20, 15, 0);
    std::cout << "После set_time(20,15,0): ";
    t1.print_time();
    
    // Тест 4: Проверка обработки исключений с некорректными значениями
    std::cout << "\n4. ТЕСТ ИСКЛЮЧЕНИЙ:" << std::endl;
    
    // Попытка создания объекта с некорректным временем
    try {
        std::cout << "Попытка создать время 25:70:80..." << std::endl;
        Time t4(25, 70, 80); // Выбросит исключение
    } catch (const std::invalid_argument& e) {
        std::cout << "Поймано исключение: " << e.what() << std::endl;
    }
    
    // Попытка установки некорректного времени через сеттер
    try {
        std::cout << "Попытка установить время 12:65:30..." << std::endl;
        t1.set_time(12, 65, 30); // Выбросит исключение
    } catch (const std::invalid_argument& e) {
        std::cout << "Поймано исключение: " << e.what() << std::endl;
    }
    
    // Успешная установка корректного времени
    try {
        t1.set_time(23, 59, 59); // Корректное время - исключения не будет
        std::cout << "Успешно установлено время: ";
        t1.print_time();
    } catch (const std::invalid_argument& e) {
        std::cout << "Исключение: " << e.what() << std::endl;
    }
    
    std::cout << "\n=== ТЕСТИРОВАНИЕ ЗАВЕРШЕНО ===" << std::endl;
    return 0;
}